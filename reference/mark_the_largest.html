<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="A function that marks the units that have the largest x-value in a data set.
Can mark the largest ones so that they cover a specified percentage of total x (method 1), can mark 
values that are greater than a specified threshold (method 2), can mark the n largest values (method 3) 
and can mark the largest so a specified percent of all units are marked (method 4)."><title>Mark units that have a large x — mark_the_largest • struktuR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Mark units that have a large x — mark_the_largest"><meta property="og:description" content="A function that marks the units that have the largest x-value in a data set.
Can mark the largest ones so that they cover a specified percentage of total x (method 1), can mark 
values that are greater than a specified threshold (method 2), can mark the n largest values (method 3) 
and can mark the largest so a specified percent of all units are marked (method 4)."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">struktuR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/FillStrata.html">FillStrata</a>
    <a class="dropdown-item" href="../articles/struktur-vignette.html">Estimation using struktuR</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Mark units that have a large x</h1>
      
      <div class="d-none name"><code>mark_the_largest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A function that marks the units that have the largest x-value in a data set.
Can mark the largest ones so that they cover a specified percentage of total x (method 1), can mark 
values that are greater than a specified threshold (method 2), can mark the n largest values (method 3) 
and can mark the largest so a specified percent of all units are marked (method 4).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mark_the_largest</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">idVar</span>,</span>
<span>  strataVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">xVar</span>,</span>
<span>  yVar <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  method <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  par_method1 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  par_method2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  par_method3 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  par_method4 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_n_method1and2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_x_method3and4 <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>Input data set of class data.frame</p></dd>


<dt>idVar</dt>
<dd><p>Name of identification variable. Should not have NA's, and should not have duplicates</p></dd>


<dt>strataVar</dt>
<dd><p>Optional. Name of stratification variable. Should not have NA's. If strataVar is given, 
the marking is performed within each stratum</p></dd>


<dt>xVar</dt>
<dd><p>Name of x-variable. Should be numeric. +/-Inf is not allowed. NA's are allowed (would never 
be marked)</p></dd>


<dt>yVar</dt>
<dd><p>Optional. Name of an extra sorting variable. Should be numeric. Only relevant for the 
sorting of equal x-values, in which case the x's are ranked according to decreasing y-value. 
NA's and +/-Inf are allowed. (NA is rated as less than -Inf)</p></dd>


<dt>method</dt>
<dd><p>The methods to be used (default is 1). Can choose between method 1, 2, 3 and 4 (see ‘Details’), 
and can use multiple methods simultaneously. The methods are specified using a vector</p></dd>


<dt>par_method1</dt>
<dd><p>Percentage for method 1 (default 25). Numeric value within the range [0, 100] (a single 
number or a vector with a length equal to the number of strata). If 0, no values are 
marked. If 100, all x &gt; 0 are marked (assuming max_n_method1and2 is not used)</p></dd>


<dt>par_method2</dt>
<dd><p>Threshold value for method 2. Numeric value &gt;= 0 (a single number or a vector with a 
length equal to the number of strata). If 0, all x &gt; 0 are marked (assuming 
max_n_method1and2 is not used)</p></dd>


<dt>par_method3</dt>
<dd><p>Number for method 3 (default 5). Integer 0, 1, 2, ... (a single number or a vector with a 
length equal to the number of strata). If 0, no values are marked</p></dd>


<dt>par_method4</dt>
<dd><p>Percentage for method 4 (default 5). Numeric value within the range [0, 100] (a single 
number or a vector with a length equal to the number of strata). If 0, no values are 
marked. If 100, all x != NA are marked (assuming min_x_method3and4 is not used)</p></dd>


<dt>max_n_method1and2</dt>
<dd><p>Optional. Applies to method 1 and 2. Maximum number of markings that can be made.
Integer 0, 1, 2, ...(a single number or a vector with a length equal to the 
number of strata)</p></dd>


<dt>min_x_method3and4</dt>
<dd><p>Optional. Applies to method 3 and 4. Minimum threshold for x (only x &gt; min_x_method3and4 
can be marked). Numeric (a single number or a vector with a length equal to the 
number of strata)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The output is a data frame. For each method used, a binary variable is created that shows which units are 
marked (the variables are named large1, large2, large3, and large4 for methods 1, 2, 3 and 4 respectively). 
Additionally, there is a variable that shows which units are marked for at least one method (the variable is named large).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>If strataVar is given, the marking is performed within each stratum. Parameters given as a single number then apply to 
each stratum. If a parameter is given as a vector, the length should equal to the number of strata, and the order of 
the elements should correspond to the order obtained when the input data is sorted by strataVar using order(): 
data[order(data[ , strataVar]) , ] <br><br>
Method 1: Marks the largest x-values so that they (at least) cover a specified percentage of the total x-value (x &lt; 0 are not included in the total x-value). 
          Only x &gt; 0 can be marked with this method.
          If strataVar is used, this is done per stratum, and the total x-value applies to the stratum.
          If max_n_method1and2 is used, it is not guaranteed that the specified percentage will be achieved. <br><br>
Method 2: Marks x-values that are greater than a specified threshold (x &gt; threshold).
          Only x &gt; 0 can be marked with this method.
          If max_n_method1and2 is used, it's not guaranteed that all x &gt; threshold will be marked. <br><br>
Method 3: Marks the n largest x-values. 
          x = NA will never be marked with this method. 
          If strataVar is used, it's the n largest per stratum that are marked. 
          If min_x_method3and4 is used, it's not guaranteed that the specified number will be marked. <br><br>
Method 4: Marks the largest x-values so that p percent of all units are marked (units with x = NA are not counted in the percentage calculation). 
          x = NA will never be marked with this method. 
          If strataVar is used, the p percent largest units per stratum are marked.
          If min_x_method3and4 is used, it's not guaranteed that the specified percentage will be achieved. <br><br>
To ensure the same result regardless of the sorting of the input data set, the function sorts the input data set 
first by idVar before further sorting and marking is done.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Test dataset</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">956</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">testData</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span>, x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, mean <span class="op">=</span> <span class="fl">1000</span>, sd <span class="op">=</span> <span class="fl">500</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                       strata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'A'</span>, <span class="fl">12</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">'B'</span>, <span class="fl">18</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">testData</span><span class="op">$</span><span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">30</span>, size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="cn">NA</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example with method 1, 2 and 3</span></span></span>
<span class="r-in"><span><span class="fu">mark_the_largest</span><span class="op">(</span>data <span class="op">=</span> <span class="va">testData</span>, idVar <span class="op">=</span> <span class="st">'id'</span>, xVar <span class="op">=</span> <span class="st">'x'</span>, method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                 par_method1 <span class="op">=</span> <span class="fl">15</span>, par_method2 <span class="op">=</span> <span class="fl">5000</span>, par_method3 <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in mark_the_largest(data = testData, idVar = "id", xVar = "x", method = c(1,     2, 3), par_method1 = 15, par_method2 = 5000, par_method3 = 5):</span> could not find function "mark_the_largest"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Example with stratification</span></span></span>
<span class="r-in"><span><span class="fu">mark_the_largest</span><span class="op">(</span>data <span class="op">=</span> <span class="va">testData</span>, idVar <span class="op">=</span> <span class="st">'id'</span>, strataVar <span class="op">=</span> <span class="st">'strata'</span>, xVar <span class="op">=</span> <span class="st">'x'</span>, </span></span>
<span class="r-in"><span>                 method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">4</span><span class="op">)</span>, par_method1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span>, par_method4 <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in mark_the_largest(data = testData, idVar = "id", strataVar = "strata",     xVar = "x", method = c(1, 4), par_method1 = c(20, 30), par_method4 = 25):</span> could not find function "mark_the_largest"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Susie Jentoft, Øyvind Langsrud, Anna-Karin Mevik.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

